<!DOCTYPE html>
<html lang="ja">

<head>
    <!-- CSSをインポート -->
    <link rel="stylesheet" href="/css/main.css">
    <!-- JavaScriptをインポート -->
    <script src="js/util.js"></script>
    <!-- jQueryをインポート -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
</head>

<body>
    <header>
        <h1>小瀬田塾 フロントエンドを勉強しよう</h1>
    </header>

    <main>
        <section><img src="images/vis-frontend-1.png" alt="HTML+CSS+JS"></section>
        <section>
            <div>勉強に便利なツール</div>
            <ul>
                <li>Visual Studio Code</li>
                <div>
                    <a href="https://code.visualstudio.com/">https://code.visualstudio.com/</a>
                    <div>エディタ</div>
                </div>
                <br>
                <li>VS Code Live Server Extension</li>
                <div>
                    <a href="https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer">https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer</a>
                    <div>ローカルで簡単にWebサーバ立てられる拡張機能。VSCodeで編集した内容がすぐにブラウザに反映される</div>
                </div>
                <br>
                <li>VS Code ESLint Extension</li>
                <div>
                    <a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint">https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint</a>
                    <div>ECMAScript準拠のlinter(構文チェック)拡張機能</div>
                </div>
                <br>
            </ul>
        </section>

        <!-- おさらい -->
        <section>
            <h2>おさらい</h2>
            <h3>JavaScriptとは何か</h3>
            <ul>
                <li>プログラミング言語</li>
                <li>主にブラウザ上で動いてWebフロントエンドの動的なUI作る為に使われている</li>
                <li>最近はフロントだけでなくバックエンドでも使えるフレームワークや実行環境が色々ある<br>Node.js(C++で作られたサーバサイドのJavaScript実行環境)など</li>
            </ul>
            <h3>ECMAScriptとは何か</h3>
            <ul>
                <li>JavaScriptの標準（言語仕様）</li>
                <li>つまりJavaScript実行エンジンは標準のECMAScriptという仕様に準拠して作りましょうということです。</li>
            </ul>

            <h3>特徴</h3>
            <ul>
                <li>インタプリタ型言語</li>
                <p>プログラムが1行づつ機械語へ翻訳しながら実行される。</p>
                <p>Pythonもインタプリタ型。反対に実行するためにコンパイルを必要とするものはコンパイラ型（C, Javaとか）</p>
                <p>コンパイラ型に比べてコード作成・編集してすぐ実行できるのが利点。一方でコンパイラ型より実行速度が遅かったり実行するまでエラーが見つけにくかったりする。</p>
                <p>フロントエンドの場合、処理速度とかエラーとかよりもリアルタイム性が求められるのでインタプリタ型の方が都合が良い。<br>コンパイラ型だと全ソースコードのコンパイル終わるまで画面描画されなかったりする。</p>
                <p>サーバサイドで使われるPythonでは、事前にバイトコードに変換してキャッシュしたり、処理速度が必要な機械学習系のライブラリは裏でCで作られたコンポーネント動かしたりしてる。</p>
                <br>

                <li>動的型付け</li>
                <p>代入される値で変数の型が決まる</p>
                <p>これもPythonと一緒<br>書くときに型を意識せずにかけて楽だけど、代入時にはエラーにならないのでバグを見落としがち</p>
                <p>特に関数の引数とか戻り値とかはどの型を期待しているか気をつける。</p>
                <pre class="prettyprint linenums"><code>
// 数値型
var num = 1;
typeof num; // "number"

// 文字列型
var str = "test";
typeof str; // "string"

// 真偽型
var bl = true;
typeof bl; // "boolean"

// オブジェクト型
var obj = {"num": 1, "str": "test"};
typeof obj; // "object"
                </code></pre>
                <br>

                <li>フロントエンドで使えるライブラリやフレームワークがいっぱいある</li>
                <br>
                <ul>
                    <li>jQuery</li>
                    <div>JavaScript標準の関数（ビルトイン関数）使うと煩雑なプログラムも、jQueryを使用すると簡単にかける。</div>
                    <div>DOM(HTMLのタグをオブジェクト化したもの)を簡単に取得するセレクタなど</div>
                    <div>Ajax（非同期通信）も簡単にかける</div>
                    <br>

                    <li>datatables.js</li>
                    <div>高機能なテーブルを簡単に作る</div>
                    <br>

                    <li>Socket.IO</li>
                    <div>サーバからのプッシュ通信などを作れる</div>
                    <div>通知やリアルタイム共同編集など</div>
                    <br>

                    <li>Vue.js</li>
                    <div>HTMLとJavaScriptをよりインタラクティブに動作させる。</div>
                    <div>JavaScrptのオブジェクトの変更を自動的にDOMに反映させたり、逆DOMの変更をJavaScripオブジェクトに反映させたり</div>
                    <br>

                    <li>その他React、 Angularなど</li>
                </ul>
            </ul>
            <br>

            <h3>一番の特徴</h3>
            <div><span style="font-size: 4em">JavaScriptはわかりにくい</span>（と僕は思います。）</div>
            <p><strong>理由</strong></p>
            <ul>
                <li>ライブラリやフレームワークが色々やりすぎ</li>
                <div>ライブラリを知らないとソース読むことすら不可（黒魔術的）</div>
                <pre class="prettyprint linenums"><code>
// $って何
$(function{
    // #って何 click, eって何
    $("#builtinSample").on("click", (e)=>{
        console.log(e);
        var children = e.target.children
        // $().eachって何
        $(children).each(function(index, element) {
            console.log($(element).text());
        })
    })
});
                </code></pre>
                <p>ちなみにconsole.log(引数)は引数をconsole（ブラウザで実行した場合はブラウザ開発ツールのコンソール）に出力するビルトイン関数です。</p>
                <br>
                <li>書き方も色々</li>
                <p>変数の書き方</p>
                <pre class="prettyprint linenums"><code>
// varとletの変数のスコープの違い
function func() {
    // 関数スコープ
    var x = 1;
    {
      // ブロックスコープ (ES6から使える)
      let y = 2;
      console.log(x);
      console.log(y);
    }
    console.log(x);
    console.log(y); // 未定義エラー
  }
                </code></pre>
                <p>関数の書き方</p>
                <pre class="prettyprint linenums"><code>
// 関数宣言と関数式の違い

func("test"); // OK
varFunc("test"); // 未定義エラー(関数式の後にしか実行できない)

// 関数宣言
function func(x){
    console.log(x);
}
// 関数式（関数を変数に代入する）
let varFunc = function(x){
    console.log(x);
}


// アロー関数とかもある（単純な省略型ではなく微妙に動作違う）
let arrowFunc = (y) => {
    console.log(y);
}
                    </code></pre>
                <br>
            </ul>

            <h3 style="font-size: 2em">ということで</h3>
            <p>一口にフロントエンドJavaScriptと言っても</p>
            <ol>
                <li>ECMAScriptの仕様とJavaScriptビルトイン関数の理解</li>
                <li>JavasScriptライブラリの理解</li>
                <li>付随するWeb技術(CSS, HTML5, AjaxやWebSocket)の理解</li>
            </ol>
            <p>という本来単純な一つの言語の学習のために色々覚えることがたくさんあります。</p>
            <p>この中では基本ES5以前からある書き方で書いていきます。</p>
            <br>
        </section>


        <!-- とりあえず -->
        <section>
            <h2>とりあえず</h2>
            <h3>変数</h3>
            <!-- ソースコード -->
            <pre class="prettyprint linenums"><code>
var 変数名 = 値;

//例
var num = 1;
            </code></pre>

            <h3>関数</h3>
            <pre class="prettyprint linenums"><code>
function 関数名(引数){
    // 関数の処理
    return 戻り値
};
// 関数の呼び出し
関数名(引数)

//例
function func(arg){
    var num = arg;
    return num
};
ret = func(1);
            </code></pre>

            <h3>WEBでどうやってJavScriptを動かすのか</h3>
            <pre class="prettyprint linenums"><code>
// scriptタグのsrc属性で.jsファイルのurlを指定して読み込み
&lt;script src=&quot;path&#x2f;to&#x2f;file.js&quot;&gt;&lt;&#x2f;script&gt;

or

// HTMLのscriptタグの中に直接記述
&lt;script&gt;
    var str = "test";
    func(str);

    function func(x){
        console.log(x);
    }
&lt;&#x2f;script&gt;

// どちらも読み込まれたタイミングで処理が発火します。
            </code></pre>
            <p>以上です。</p>
        </section>


        <!-- ビルトイン関数使ってみる -->
        <section>
            <h2>Javascriptのビルトイン関数でDOMを操作してみる</h2>
            <p>参考: <a href="https://developer.mozilla.org/ja/docs/Web/API/Document/getElementById" target="_blank">https://developer.mozilla.org/ja/docs/Web/API/Document/getElementById</a></p>
            <p>HTML</p>

            <!-- ソースコード -->
            <pre class="prettyprint linenums"><code>
&lt;p id=&quot;para1&quot; style=&quot;font-size:32px&quot;&gt;ここを変える&lt;&#x2f;p&gt;
&lt;button id=&quot;blueBtn&quot; class=&quot;blue&quot;&gt;blue&lt;&#x2f;button&gt;
&lt;button id=&quot;redBtn&quot; class=&quot;red&quot;&gt;red&lt;&#x2f;button&gt;
            </code></pre>

            <p>JavaScript</p>
            <pre class="prettyprint linenums"><code>
// ドキュメントロード時に実行
document.addEventListener('DOMContentLoaded', function() {
    // blueボタンイベント登録
    var blueBtn = document.getElementById("blueBtn")
    blueBtn.addEventListener('click', function(e){
        changeColorWithBuiltinFunc(e.target.className);
    }, false);
    // redボタンイベント登録
    var redBtn = document.getElementById("redBtn")
    redBtn.addEventListener('click', function(e){
        changeColorWithBuiltinFunc(e.target.className);
    }, false);
});
function changeColorWithBuiltinFunc(newColor) {
    // 対象のDOM要素を取得
    var elem = document.getElementById('para1');
    // 要素のテキストを変える（newColorの中はonclickの引数）
    elem.innerText = newColor;
    // 要素のスタイルを変える
    elem.style.color = newColor;
}
            </code></pre>

            <!-- ビルトイン関数 サンプル-->
            <div id="builtinSample">
                <p id="para1" style="font-size:32px">ここを変える</p>
                <button id="blueBtn" class="blue">blue</button>
                <button id="redBtn" class="red">red</button>
                <script>
                    // ドキュメントロード時に実行
                    document.addEventListener('DOMContentLoaded', function () {
                        // blueボタンイベント登録
                        var blueBtn = document.getElementById("blueBtn")
                        blueBtn.addEventListener('click', function (e) {
                            changeColorWithBuiltinFunc(e.target.className);
                        }, false);
                        // redボタンイベント登録
                        var redBtn = document.getElementById("redBtn")
                        redBtn.addEventListener('click', function (e) {
                            changeColorWithBuiltinFunc(e.target.className);
                        }, false);
                    });
                    function changeColorWithBuiltinFunc(newColor) {
                        // 対象のDOM要素を取得
                        var elem = document.getElementById('para1');
                        // 要素のテキストを変える（newColorの中はonclickの引数）
                        elem.innerText = newColor;
                        // 要素のスタイルを変える
                        elem.style.color = newColor;
                    }
                </script>
            </div>

        </section>


        <!-- jQuery使ってみる -->
        <section>
            <h2>jQuery</h2>
            <p>参考: <a href="https://webkikaku.co.jp/blog/webdesign/jquery_start/">https://webkikaku.co.jp/blog/webdesign/jquery_start/</a></p>
            <h3>JQueryとは何か</h3>
            <ul>
                <li>JavaScriptのライブラリ</li>
                <br>
                <li>DOM操作が簡単にできる</li>
                <p>セレクタ機能</p>
                <p>jQueryで最も基本的な機能がセレクタです。</p>
                <pre class="prettyprint linenums"><code>
// $() は ライブラリのjQuery()関数のエイリアス（ショートカット）

// $(”#id")でid属性が"id"の要素を取得
&lt;button id=&quot;redBtn&quot;&gt;&lt;&#x2f;button&gt;
var redBtn = $("#redBtn");

// $(”.class")でclass属性が"class"の要素を取得
&lt;span class=&quot;red&quot;&gt;&lt;&#x2f;span&gt;
&lt;button class=&quot;red&quot;&gt;&lt;&#x2f;button&gt;
var redElems = $(".red");

// $(”tag")でタグの種類が"tag"の要素を取得
&lt;button class=&quot;red&quot;&gt;&lt;&#x2f;button&gt;
&lt;button class=&quot;blue&quot;&gt;&lt;&#x2f;button&gt;
var buttons = $("button");

// $(”query1 query2")で、query1に該当する要素の子要素の内、query2に該当する要素を取得
&lt;div id=&quot;jquerySample&quot;&gt;
    &lt;button&gt;ボタン1&lt;&#x2f;button&gt;
    &lt;button&gt;ボタン2&lt;&#x2f;button&gt;
&lt;&#x2f;div&gt;
var jquerySampleButtons = $("#jquerySample button");
                </code></pre>
                <br>
                <li>Ajaxも簡単にできる</li>
                <p>別途やります</p>
                <br>
            </ul>
        </section>


        <!-- jQueryでDOM操作してみる -->
        <section>
            <h2>jQueryでDOMを操作してみる</h2>
            <p>HTML</p>
            <pre class="prettyprint linenums"><code>
// CDNからjQuery読み込み
&lt;script src=&quot;https:&#x2f;&#x2f;code.jquery.com&#x2f;jquery-3.3.1.min.js&quot;&gt;&lt;&#x2f;script&gt;
// もしくはローカルファイルにダウンロードして読み込み
&lt;script src=&quot;js&#x2f;jquery&#x2f;jquery-3.3.1.min.js&quot;&gt;&lt;&#x2f;script&gt;

&lt;p id=&quot;para2&quot; style=&quot;font-size:32px&quot;&gt;ここを変える&lt;&#x2f;p&gt;
&lt;button class=&quot;green&quot;&gt;green&lt;&#x2f;button&gt;
&lt;button class=&quot;orange&quot;&gt;orange&lt;&#x2f;button&gt;
            </code></pre>
            <p>JavaScript</p>
            <pre class="prettyprint linenums"><code>
// ドキュメントが描画されたときに実行される
$(function () {
    // id属性が"jquerySample"の要素の子要素の中の、全てのbuttonタグの要素を取得
    var buttons = $("#jquerySample button");
    // クリックイベントに関数登録
    buttons.on("click", function (e) {
        changeColorWithJquery(e.target.className);
    });
});

function changeColorWithJquery(newColor) {
    // DOM要素を取得
    var elem = $('#para2');
    // 要素のテキストを変える（newColorの中はonclickの引数）
    elem.text(newColor);
    // 要素のスタイルを変える
    elem.css("color", newColor);
}
            </code></pre>

            <!-- jQuery サンプル-->
            <div id="jquerySample">
                <p id="para2" style="font-size:32px">ここを変える</p>
                <button class="green">green</button>
                <button class="orange">orange</button>
                <script>
                    // ドキュメントが描画されたときに実行される
                    $(function () {
                        // id属性が"jquerySample"の要素の子要素の中の、全てのbuttonタグの要素を取得
                        var buttons = $("#jquerySample button");
                        // クリックイベントに関数登録
                        buttons.on("click", function (e) {
                            changeColorWithJquery(e.target.className);
                        });
                    });

                    function changeColorWithJquery(newColor) {
                        // DOM要素を取得
                        var elem = $('#para2');
                        // 要素のテキストを変える（newColorの中はonclickの引数）
                        elem.text(newColor);
                        // 要素のスタイルを変える
                        elem.css("color", newColor);
                    }
                </script>
            </div>
        </section>

        <!--  -->
        <section id="syncSample">
            <h2>Ajax</h2>
            <h3>Ajaxとは何か</h3>
            <ul>
                <li>Asynchronous JavaScript + XML</li>
                <p>JavaScriptとXMLを使った非同期通信です。（XMLのところは意識しなくていいです。）</p>
                <p>ページ遷移を発生させずに、サーバと通信してデータをやりとりする。</p>
                <br>
                <li>同期通信と非同期通信</li>
                <h3>これが同期通信だ</h3>
                <div>
                    <form action="result.html" method="GET">
                        <button type="submit">sync</button>
                        <div id="syncResult"></div>
                    </form>
                </div>
                <br>
                <h3>これが非同期通信だ</h3>
                <div>
                    <button id="asyncBtn">Async</button>
                    <div>
                        <ul id="asyncResult"></ul>
                    </div>
                    <script>
                        $(function () {
                            $("#asyncBtn").on("click", function () {
                                getData();
                            })
                        });
                        function getData() {
                            $.ajax({
                                type: "get",
                                url: "data/result.json",
                                dataType: "json"
                            }).done(function (data) {
                                $("#asyncResult").empty();
                                $("#asyncResult").before("結果")
                                $(data.result).each(function (index, element) {
                                    $("<li></li>").appendTo("#asyncResult").text(element)
                                })
                            });
                        }
                    </script>
                </div>
            </ul>

        </section>

        <!-- Ajaxしてみる -->
        <section>
            <h2>Ajaxしてみる</h2>
            <p>HTML</p>
            <pre class="prettyprint linenums"><code>
&lt;div id=&quot;ajaxSample&quot;&gt;
    &lt;p style=&quot;font-size:32px&quot;&gt;天気予報&lt;&#x2f;p&gt;
    &lt;button data-city=&quot;tokyo&quot;&gt;東京&lt;&#x2f;button&gt;
    &lt;button data-city=&quot;sapporo&quot;&gt;札幌&lt;&#x2f;button&gt;
    &lt;div id=&quot;ajaxResult&quot;&gt;&lt;&#x2f;div&gt;
&lt;&#x2f;div&gt;
            </code></pre>
            <p>JavaScript</p>
            <pre class="prettyprint linenums"><code>
$(function () {
    // お決まりのドキュメント描画時のイベント登録
    $("#ajaxSample button").on("click", function (e) {
        var cityId = $(e.target).data("city");
        getWeather(cityId);
    });
});
function getWeather(cityId) {
    // AjaxでGet
    $.ajax({
        type: "get",                        // HTTP メソッド
        url: "data/" + cityId + ".json",    // URL
        dataType: "json"                    // 返却されるデータのタイプ
    }).done(function (data) {
        // サーバからのレスポンスがきたら処理される
        $("#ajaxResult").empty();
        // DOMにデータを追加
        var ul = $("&lt;ul&gt;&lt;&#x2f;ul&gt;").appendTo("#ajaxResult");
        $(data.forecasts).each(function (index, element) {
            let txt = `${element.dateLabel} ${element.telop}`;
            if (element.temperature.max){
                txt = txt +` 最高: ${element.temperature.max.celsius}℃`;
            }
            if (element.temperature.min){
                txt = txt +` 最低: ${element.temperature.min.celsius}℃`;
            }
            $("&lt;li&gt;&lt;&#x2f;li&gt;").appendTo(ul).text(txt);
        });
    });
}
            </code></pre>

            <!-- jQuery サンプル-->
            <div id="ajaxSample">
                <p style="font-size:32px">天気予報</p>
                <button data-city="tokyo">東京</button>
                <button data-city="sapporo">札幌</button>
                <div id="ajaxResult"></div>
                <script>
                    $(function () {
                        // お決まりのドキュメント描画時のイベント登録
                        $("#ajaxSample button").on("click", function (e) {
                            var cityId = $(e.target).data("city");
                            getWeather(cityId);
                        });
                    });
                    function getWeather(cityId) {
                        // AjaxでGet
                        $.ajax({
                            // HTTP メソッド
                            type: "get",
                            // URL
                            url: "data/" + cityId + ".json",
                            // 返却されるデータのタイプ
                            dataType: "json"
                        }).done(function (data) {
                            // サーバからのレスポンスがきたら処理される
                            $("#ajaxResult").empty();
                            // DOMにデータを追加
                            var ul = $("<ul></ul>").appendTo("#ajaxResult");
                            $(data.forecasts).each(function (index, element) {
                                let txt = `${element.dateLabel} ${element.telop}`;
                                if (element.temperature.max){
                                    txt = txt +` 最高: ${element.temperature.max.celsius}℃`;
                                }
                                if (element.temperature.min){
                                    txt = txt +` 最低: ${element.temperature.min.celsius}℃`;
                                }
                                $("<li></li>").appendTo(ul).text(txt);
                            });
                        });
                    }
                </script>
            </div>
        </section>
    </main>

    <!-- JavaScriptのインポートはパフォーマンス的な理由でheadタグじゃなくbodyの最後に入れることが多い -->
    <script type="text/javascript" src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
</body>

</html>